#include "<df>/dragonfruit.h"
#include "<inc>/HALLog.h"

#include "<inc>/KeCrash.h"
#include "<inc>/KeIPL.h"
#include "<inc>/KeDPC.h"

#include "<inc>/KeMemAlloc.h"

#include "<inc>/HALRTC.h"

extern KeMemInit { -- }

extern HALCPUHalt { -- }

fn KeMain { -- ret }
	"Hello Andromeda World!\n" "KeMain" HALLog

	KeMemInit

	IPLLOW KeIPLLower

	HALRTCQuery swap "%d sec %d ms\n" Printf

	while (1)
		HALCPUHalt
	end

	"Test BSOD\n" KeCrash

	0 ret!
end