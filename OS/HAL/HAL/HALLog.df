#include "<df>/dragonfruit.h"

var HALLogLastSource 0

fn HALLog { ... fmt src -- }
	if (HALLogLastSource@ src@ ==)
		"  " Printf
	end else
		if (HALLogLastSource@)
			"\n" Printf
		end

		src@ HALLogLastSource!
		src@ "%s:\n  " Printf
	end

	argv argc@ fmt@ VPrintf
end